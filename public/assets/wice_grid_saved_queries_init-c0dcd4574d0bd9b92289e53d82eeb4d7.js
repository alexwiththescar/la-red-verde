((function(){var a,b,c,d,e;jQuery(function(){return e()}),e=function(){return $(".wice-grid-save-query-field").keydown(function(a){if(a.keyCode===13)return d($(this).next(),a)}),$(".wice-grid-save-query-button").click(function(a){return d(this,a)}),$(".wice-grid-delete-query").click(function(b){return a(this,b)}),$(".wice-grid-query-load-link").click(function(a){return b(this,a)})},b=function(a,b){var c,d,e;if(c=window.getGridProcessorForElement(a))d=$(a).data("query-id"),e=c.appendToUrl(c.buildUrlWithParams(),c.parameterNameForQueryLoading+encodeURIComponent(d)),window.location=e;return b.preventDefault(),b.stopPropagation(),!1},a=function(a,b){var d,e,f;return d=$(a).data("wg-confirm"),f=d?function(){return confirm(d)}:function(){return!0},f()&&(e=window.getGridProcessorForElement(a))&&jQuery.ajax({url:$(a).attr("href"),async:!0,dataType:"json",success:function(a,b,d){return c(a,e.name)},type:"POST"}),b.preventDefault(),b.stopPropagation(),!1},d=function(a,b){var d,e,f,g,h,i,j,k;if(e=window.getGridProcessorForElement(a))return k=$(a),d=k.data("base-path-to-query-controller"),f=k.data("parameters"),h=k.data("ids"),g=k.prev(),h instanceof Array&&h.each(function(a){return f.push(["extra["+a+"]",$("#"+a).val()])}),i=g.val(),j=e.gridStateToRequest(f),jQuery.ajax({url:d,async:!0,data:j+"&query_name="+encodeURIComponent(i),dataType:"json",success:function(a,b,d){return c(a,e.name,i,g)},type:"POST"}),b.preventDefault(),!1},c=function(c,d,e,f){var g,h,i,j,k;return j="#"+d+"_notification_messages",h="#"+d+"_title",k="#"+d+"_query_list",e&&f.val(""),(g=c.error_messages)?$(j).text(errorExplanation):((i=c.notification_messages)&&$(j).text(i),e&&$(h).html("<h3>"+e+"</h3>"),$(k).replaceWith(c.query_list),$(k).effect("highlight"),$(".wice-grid-delete-query",$(k)).click(function(b){return a(this,b)}),$(".wice-grid-query-load-link",$(k)).click(function(a){return b(this,a)}))}})).call(this);