((function(){var a;a=function(){function a(a,b,c,d,e,f,g){this.name=a,this.baseRequestForFilter=b,this.baseLinkForShowAllRecords=c,this.linkForExport=d,this.parameterNameForQueryLoading=e,this.parameterNameForFocus=f,this.environment=g,this.filterDeclarations=new Array,this.checkIfJsFrameworkIsLoaded()}return a.prototype.checkIfJsFrameworkIsLoaded=function(){if(!jQuery)return alert("jQuery not loaded, WiceGrid cannot proceed!")},a.prototype.toString=function(){return"<WiceGridProcessor instance for grid '"+this.name+"'>"},a.prototype.process=function(a){return window.location=this.buildUrlWithParams(a)},a.prototype.setProcessTimer=function(a){var b;return this.timer&&(clearTimeout(this.timer),this.timer=null),b=this,this.timer=setTimeout(function(){return b.process(a)},1e3)},a.prototype.reloadPageForGivenGridState=function(a){var b;return b=this.gridStateToRequest(a),window.location=this.appendToUrl(this.baseLinkForShowAllRecords,b)},a.prototype.gridStateToRequest=function(a){return jQuery.map(a,function(a){return encodeURIComponent(a[0])+"="+encodeURIComponent(a[1])}).join("&")},a.prototype.appendToUrl=function(a,b){var c;return c=a.indexOf("?")!==-1?/[&\?]$/.exec(a)?"":"&":"?",a+c+b},a.prototype.buildUrlWithParams=function(a){var b,c,d,e=this;return d=new Array,jQuery.each(this.filterDeclarations,function(a,b){var c;c=e.readValuesAndFormQueryString(b.filterName,b.detached,b.templates,b.ids);if(c&&c!=="")return d.push(c)}),c=this.baseRequestForFilter,d.length!==0&&(b=d.join("&"),c=this.appendToUrl(c,b)),a&&(c=this.appendToUrl(c,this.parameterNameForFocus+a)),c},a.prototype.reset=function(){return window.location=this.baseRequestForFilter},a.prototype.exportToCsv=function(){return window.location=this.linkForExport},a.prototype.register=function(a){return this.filterDeclarations.push(a)},a.prototype.readValuesAndFormQueryString=function(a,b,c,d){var e,f,g,h,i,j,k,l,m,n;i=new Array;for(f=k=0,m=c.length-1;0<=m?k<=m:k>=m;f=0<=m?++k:--k){if($(d[f])===null)return this.environment==="development"&&(h='WiceGrid: Error reading state of filter "'+a+'". No DOM element with id "'+d[f]+'" found.',b&&(h+='You have declared "'+a+'" as a detached filter but have not output it anywhere in the template. Read documentation about detached filters.'),alert(h)),"";e=$("#"+d[f]),e[0]&&e[0].type==="checkbox"?e[0].checked&&(j=1):j=e.val();if(j instanceof Array)for(g=l=0,n=j.length-1;0<=n?l<=n:l>=n;g=0<=n?++l:--l)j[g]&&j[g]!==""&&i.push(c[f]+encodeURIComponent(j[g]));else j&&j!==""&&i.push(c[f]+encodeURIComponent(j))}return i.join("&")},a,a}(),a._version="3.2",window.WiceGridProcessor=a})).call(this);